{"version":3,"file":"markdown-page-renderer.js","sources":["../src/markdown-page-renderer.ts"],"sourcesContent":["import {\n  PageData,\n  type TaprootPageRenderer,\n} from \"@taprootio/rollup-plugin-taproot/dist/models/TaprootPageRenderer\"\nimport MarkdownIt from \"markdown-it\"\nimport Anchor from \"markdown-it-anchor\"\nimport TOC from \"markdown-it-toc-done-right\"\nimport Table from \"markdown-it-multimd-table\"\nimport matter from \"gray-matter\"\n\nconst compiler = new MarkdownIt({\n  html: true,\n  typographer: true,\n})\n  .use(Anchor, {\n    permalink: Anchor.permalink.ariaHidden({\n      placement: \"before\",\n    }),\n  })\n  .use(TOC)\n  .use(Table)\n\nconst MarkdownPageRenderer: TaprootPageRenderer = {\n  FileMatcher: new RegExp(\"([a-zA-Z0-9s_\\\\.-:])+(.md)$\"),\n  Render: (source: string) => {\n    const withYAML = matter(source)\n    const yamlData = withYAML.data as PageData\n    const rendered = compiler.render(withYAML.content)\n\n    console.log(JSON.stringify(yamlData))\n\n    return {\n      Contents: rendered,\n      Data: yamlData,\n    }\n  },\n}\n\nexport { MarkdownPageRenderer }\n"],"names":["MarkdownIt","Anchor","TOC","Table","matter"],"mappings":";;;;;;;;;;;;;;;;;;AAUA,MAAM,QAAQ,GAAG,IAAIA,8BAAU,CAAC;AAC9B,IAAA,IAAI,EAAE,IAAI;AACV,IAAA,WAAW,EAAE,IAAI;CAClB,CAAC;KACC,GAAG,CAACC,0BAAM,EAAE;AACX,IAAA,SAAS,EAAEA,0BAAM,CAAC,SAAS,CAAC,UAAU,CAAC;AACrC,QAAA,SAAS,EAAE,QAAQ;KACpB,CAAC;CACH,CAAC;KACD,GAAG,CAACC,uBAAG,CAAC;KACR,GAAG,CAACC,yBAAK,CAAC,CAAA;AAEb,MAAM,oBAAoB,GAAwB;AAChD,IAAA,WAAW,EAAE,IAAI,MAAM,CAAC,6BAA6B,CAAC;AACtD,IAAA,MAAM,EAAE,CAAC,MAAc,KAAI;AACzB,QAAA,MAAM,QAAQ,GAAGC,0BAAM,CAAC,MAAM,CAAC,CAAA;AAC/B,QAAA,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAgB,CAAA;QAC1C,MAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;QAElD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAA;QAErC,OAAO;AACL,YAAA,QAAQ,EAAE,QAAQ;AAClB,YAAA,IAAI,EAAE,QAAQ;SACf,CAAA;KACF;;;;;"}